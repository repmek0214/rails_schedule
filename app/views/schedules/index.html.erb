<!-- app/views/schedules/index.html.erb -->
<h1>予定一覧</h1
<% if flash[:notice] %>
 <p class="notice"><%= flash[:notice] %></p>
<% end %>
<p>本日の日付: <%= Time.zone.now.strftime('%Y/%m/%d') %></p>
<p>予定の合計数: <%= @schedules.nil? ? 0 : @schedules.count %></p>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>開始日</th>
      <th>終了日</th>
      <th>終日</th>
      <th>更新日時</th>
    </tr>
  </thead>
  <tbody>
   <% if @schedules.present? %>
    <% @schedules.each do |schedule| %>
     <tr>
      <td><%= schedule.id %></td>
      <td><%= schedule.title %></td>
      <td><%= schedule.start_date.strftime('%Y/%m/%d') %></td>
      <td><%= schedule.end_date.strftime('%Y/%m/%d') %></td>
      <td><%= schedule.all_day ? '○' : '' %></td>
      <td><%= schedule.updated_at.to_s(:datetime_jpm) %></td>

      <td>
       <%= link_to '詳細', schedule %>
       <%= link_to '編集', edit_schedule_path(schedule) %>
       <%= link_to '削除', schedule, method: :delete, data: { confirm: "予定を削除しますか？"} %>
      </td>
     </tr>

   <% end %>
   <% else %>
    <p>予定がありません。</p>
   <% end %>

  </tbody>
<p><%= link_to '新規追加', new_schedule_path %></p>
